<h1 class="h3 mb-2 text-gray-800">新增角色</h1>
<div class="mb-4">
    <div *ngIf="message" class="alert alert-primary alert-dismissible fade show" role="alert">
        <strong>{{ message }}</strong>
        <button type="button" class="close" (click)="message = null" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
</div>

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">
            <span>員工新增</span>
            <div class="btn-group float-right" role="group" aria-label="功能選單">
                <button type="submit" class="btn btn-warning" (click)="onSubmit()">儲存</button>
                <button type="button" class="btn btn-info" (click)="onReset(roleForm)">重填</button>
                <button type="button" class="btn btn-primary" (click)="goBack()">回上頁</button>
            </div>
        </h6>
    </div>
    <div class="card-body">
        <form id="roleForm" #roleForm="ngForm" novalidate>
            <div class="form-group required">
                <label for="code">代碼</label>
                <input id="code" name="code" type="text" class="form-control"
                       data-parsley-required="true"
                       data-parsley-english-only
                       data-parsley-maxlength="256"
                       data-parsley-code-repeat
                       [(ngModel)]="role.code">
                <small id="codeHelp" class="form-text text-muted">代碼需為英文，不可重複</small>
            </div>
            <div class="form-group required">
                <label for="title">名稱</label>
                <input id="title" name="title" type="text" class="form-control"
                       data-parsley-required="true"
                       data-parsley-maxlength="256"
                       [(ngModel)]="role.title">
            </div>
            <div class="form-group">
                <label for="description">描述</label>
                <textarea id="description" name="description"
                          class="form-control" rows="3"
                          data-parsley-maxlength="512" [(ngModel)]="role.description"></textarea>
            </div>

            <!-- 允許機關管理者設定 -->
            <div class="form-group">
                <label>允許機關管理者設定</label>
                <div *ngFor="let s of assignableOptions" class="custom-control custom-radio">
                    <input [id]="'assignable' + s.id" [value]="s.value" name="assignable" type="radio" class="custom-control-input"
                        data-parsley-required="true"
                        data-parsley-class-handler="#assignable1,#assignable2"
                        data-parsley-errors-container="#assignableError"
                        [(ngModel)]="role.assignable" />
                    <label class="custom-control-label" [for]="'assignable' + s.id">{{ s.label }}</label>
                </div>
                <div id="assignableError" class="controlError"></div>
            </div>

            <div class="tree_box">
                <div class="title">應用功能</div>
                <div class="menuError invalid-feedback"></div>
                <div id="menuTree"></div>
            </div>
        </form>
    </div>
</div>