"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[929],{7929:(T,g,i)=>{i.r(g),i.d(g,{LoginLogModule:()=>A});var m=i(6895),b=i(1387),e=i(8256),h=i(2812),d=i(433);function f(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"strong"),e._uU(2),e.qZA(),e.TgZ(3,"button",24),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.message=null)}),e.TgZ(4,"span",25),e._uU(5,"\xd7"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}const y=[{path:"index",component:(()=>{class n{constructor(t){this.assetLoader=t,this.message=null,this.queryUsername="",this.queryActionedAt=null}ngOnInit(){}ngAfterViewInit(){this.assetLoader.loadAssets(["assets/sb-admin/vendor/datatables/jquery.dataTables.min.js"],[]).then(()=>this.assetLoader.loadAssets(["assets/sb-admin/vendor/datatables/dataTables.bootstrap4.min.js","assets/sb-admin/vendor/datatables/springify.js","assets/sb-admin/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js","assets/sb-admin/vendor/bootstrap-datepicker/locales/bootstrap-datepicker.zh-TW.min.js"],["assets/sb-admin/vendor/datatables/dataTables.bootstrap4.min.css","assets/sb-admin/vendor/bootstrap-datepicker/css/bootstrap-datepicker.standalone.min.css"])).then(()=>{this.initDataTable()})}initDataTable(){$("#queryActionedAt").datepicker({format:"yyyy-mm-dd",todayHighlight:!0,language:"zh-TW"});var t=$("#dataTable").DataTable({language:{url:"assets/sb-admin/vendor/datatables/Chinese-traditional.json"},processing:!0,serverSide:!0,searching:!1,ajax:{url:"/angular/login-log/query",type:"POST",headers:{Authorization:"Bearer "+localStorage.getItem("token")||0},data:this.springify},order:[],columns:[{name:"index",data:null,width:"10%",orderable:!1,searchable:!1,render:function(a,l,s,c){var r=t.page.len();return t.page.info().page*r+c.row+1}},{name:"username",data:"username",orderable:!1,searchable:!1},{name:"actionedAt",data:"actionedAt",width:"20%",orderable:!1,searchable:!1},{name:"ip",data:"ip",orderable:!1,searchable:!1},{name:"status",data:"status",orderable:!1,searchable:!1,render:function(a,l,s,c){return"succeed"===a?"\u6210\u529f":"failed"===a?"\u5931\u6557":a}},{name:"cause",data:"cause",orderable:!1,searchable:!1}]})}springify(t,a){Array.isArray(t.columns)&&(t.columns.forEach((r,o)=>{t[`columns[${o}].index`]=o,t[`columns[${o}].data`]=r.data,t[`columns[${o}].name`]=r.name,t[`columns[${o}].searchable`]=r.searchable,t[`columns[${o}].orderable`]=r.orderable,t[`columns[${o}].search.regex`]=r.search?.regex,t[`columns[${o}].search.value`]=r.search?.value}),delete t.columns),Array.isArray(t.order)&&(t.order.forEach((r,o)=>{t[`order[${o}].column`]=r.column,t[`order[${o}].dir`]=r.dir}),delete t.order),t.search&&(t["search.regex"]=t.search.regex,t["search.value"]=t.search.value,delete t.search),$("#filterForm");var s=$("#queryUsername").val();s&&""!==s&&(t.queryUsername=s);var c=$("#queryActionedAt").val();return c&&""!==c&&(t.queryActionedAt=c),t}ngOnDestroy(){$("#dataTable").DataTable().destroy(!0)}onQuery(){$("#dataTable").DataTable().ajax.reload()}onReset(){this.queryUsername="",this.queryActionedAt=null,$("#queryActionedAt").val(this.queryActionedAt)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.s))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login-log-index"]],decls:44,vars:3,consts:[[1,"h3","mb-2","text-gray-800"],[1,"mb-4","mr-4"],["class","alert alert-primary alert-dismissible fade show","role","alert",4,"ngIf"],[1,"card","shadow","mb-4"],[1,"card-header","py-3"],["id","filterForm","method","post"],[1,"m-0","font-weight-bold","text-primary"],[1,"row"],[1,"col-sm-5"],[1,"form-group"],["for","queryUsername",1,"control-label"],["type","text","name","queryUsername","id","queryUsername",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-sm-1"],["for","queryActionedAt",1,"control-label"],["type","text","name","queryActionedAt","id","queryActionedAt","placeholder","YYYY-MM-DD",1,"form-control","datepicker","mb-2","mr-sm-2",3,"ngModel","ngModelChange"],[1,"col-sm-12"],[1,"btn","btn-success","mb-2",3,"click"],[1,"btn","btn-info","ml-2","mb-2",3,"click"],[1,"card-body"],[1,"table-responsive"],["id","dataTable","width","100%","cellspacing","0",1,"table","table-bordered","table-striped"],["width","10%"],["width","20%"],["role","alert",1,"alert","alert-primary","alert-dismissible","fade","show"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(t,a){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"\u64cd\u4f5c\u8a18\u9304"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,f,6,1,"div",2),e.qZA(),e.TgZ(4,"div",3)(5,"div",4)(6,"form",5)(7,"h6",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"label",10),e._uU(12,"\u767b\u5165\u5e33\u865f"),e.qZA(),e.TgZ(13,"input",11),e.NdJ("ngModelChange",function(s){return a.queryUsername=s}),e.qZA()()(),e._UZ(14,"div",12),e.TgZ(15,"div",8)(16,"div",9)(17,"label",13),e._uU(18,"\u767b\u5165\u6642\u9593"),e.qZA(),e.TgZ(19,"input",14),e.NdJ("ngModelChange",function(s){return a.queryActionedAt=s}),e.qZA()()()(),e.TgZ(20,"div",7)(21,"div",15)(22,"button",16),e.NdJ("click",function(){return a.onQuery()}),e._uU(23,"\u67e5\u8a62"),e.qZA(),e.TgZ(24,"button",17),e.NdJ("click",function(){return a.onReset()}),e._uU(25,"\u6e05\u9664"),e.qZA()()()()()(),e.TgZ(26,"div",18)(27,"div",19)(28,"table",20)(29,"thead")(30,"tr")(31,"th",21),e._uU(32,"\u5e8f\u865f"),e.qZA(),e.TgZ(33,"th"),e._uU(34,"\u767b\u5165\u5e33\u865f"),e.qZA(),e.TgZ(35,"th",22),e._uU(36,"\u767b\u5165\u6642\u9593"),e.qZA(),e.TgZ(37,"th"),e._uU(38,"\u767b\u5165IP"),e.qZA(),e.TgZ(39,"th"),e._uU(40,"\u767b\u5165\u72c0\u614b"),e.qZA(),e.TgZ(41,"th"),e._uU(42,"\u5931\u6557\u539f\u56e0"),e.qZA()()(),e._UZ(43,"tbody"),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",a.message),e.xp6(10),e.Q6J("ngModel",a.queryUsername),e.xp6(6),e.Q6J("ngModel",a.queryActionedAt))},dependencies:[m.O5,d._Y,d.Fj,d.JJ,d.JL,d.On,d.F]}),n})()},{path:"",redirectTo:"index",pathMatch:"full"}];let p=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[b.Bz.forChild(y),b.Bz]}),n})(),A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[m.ez,p,d.u5]}),n})()}}]);